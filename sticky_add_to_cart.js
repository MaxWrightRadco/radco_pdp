document.addEventListener("readystatechange",function(){if(document.readyState==="complete"){function isMobileDevice(){return window.matchMedia("(max-width: 767px)").matches}if(isMobileDevice()){const priceContainer=document.querySelector(".cmp-productdetails__found-right .price-container");const addToBasketContainer=document.querySelector(".cmp-productdetails__sticky");const outOfStockContainer=document.querySelector(".cmp-productdetails.cmp-productdetails__outofstock .cmp-productdetails__sticky");const priceContainerAttr=priceContainer.getAttribute("data-product-price");const stickyContainer=document.createElement("div");stickyContainer.className="sticky-add-to-cart";stickyContainer.style.position="fixed";stickyContainer.style.bottom="0";stickyContainer.style.left="0";stickyContainer.style.right="0";stickyContainer.style.display="flex";stickyContainer.style.justifyContent="space-between";stickyContainer.style.alignItems="center";stickyContainer.style.backgroundColor="#fff";stickyContainer.style.padding="10px";stickyContainer.style.boxShadow="0 -2px 5px rgba(0, 0, 0, 0.1)";stickyContainer.style.opacity="0";stickyContainer.style.transition="opacity 0.3s ease, display 0.3s ease";stickyContainer.style.zIndex="1000";stickyContainer.style.display="none";const newPriceContainer=document.createElement("div");newPriceContainer.className="price-sticky";newPriceContainer.innerHTML=priceContainer.outerHTML;newPriceContainer.querySelector(".price-container").setAttribute("data-product-price",priceContainerAttr);const newAddToBasketContainer=document.createElement("div");newAddToBasketContainer.className="add-to-basket-sticky";newAddToBasketContainer.innerHTML=addToBasketContainer.outerHTML;stickyContainer.appendChild(newPriceContainer);stickyContainer.appendChild(newAddToBasketContainer);document.body.appendChild(stickyContainer);function copyEventListeners(originalButton,newButton){newButton.addEventListener("click",function(event){event.preventDefault();originalButton.click()})}const originalAddToBasketButton=addToBasketContainer.querySelector(".button__addToBasket");const newAddToBasketButton=newAddToBasketContainer.querySelector(".button__addToBasket");if(originalAddToBasketButton&&newAddToBasketButton){copyEventListeners(originalAddToBasketButton,newAddToBasketButton)}function disableStickyButton(){newAddToBasketButton.style.backgroundColor="grey";newAddToBasketButton.style.pointerEvents="none"}function checkVisibility(){const rect=addToBasketContainer.getBoundingClientRect();const isVisible=rect.top<window.innerHeight-20&&rect.bottom>20;const isOutOfStockHidden=outOfStockContainer&&window.getComputedStyle(outOfStockContainer).display==="none";const i=document.querySelector("#attentive_creative");const immerssWidget=document.querySelector("#immerss-widget");let n=null;if(immerssWidget&&immerssWidget.shadowRoot){n=immerssWidget.shadowRoot.querySelector("div.iw-widget-button.iw-visible")}if(!isVisible&&!isOutOfStockHidden){stickyContainer.style.opacity="1";stickyContainer.style.display="flex";newAddToBasketContainer.style.display="block";if(i){i.style.bottom="91px";i.style.transition="bottom 0.3s ease 0s"}if(n){n.style.bottom="91px";n.style.transition="bottom 0.3s ease 0s"}}else{stickyContainer.style.opacity="0";stickyContainer.style.display="none";newAddToBasketContainer.style.display="none";if(i){i.style.bottom="16px";i.style.transition="bottom 0.3s ease 0s"}if(n){n.style.bottom="var(--iw-widget-button-y)";n.style.transition="bottom 0.3s ease 0s"}}}window.addEventListener("scroll",checkVisibility);const observer=new MutationObserver(function(mutationsList){for(let mutation of mutationsList){if(mutation.type==="childList"){if(document.querySelector("p.error")){disableStickyButton()}}}});observer.observe(document.body,{childList:true,subtree:true});checkVisibility()}}});
